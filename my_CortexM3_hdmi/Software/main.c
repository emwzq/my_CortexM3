#include "CortexM3.h"
#include "CortexM3_driver.h"


uint32_t* hdmi_0 = APB_HDMI_BASE;
uint32_t* addr_hdmi = APB_HDMI_BASE;
uint32_t a,b,c,d,e;

uint8_t image[]={0,0,1,1,3,5,3,0,0,0,0,1,1,0,0,1,0,0,4,8,0,17,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,1,1,1,1,3,0,0,1,0,0,0,9,5,0,0,0,0,1,2,3,0,0,0,0,2,6,5,3,1,0,0,0,0,7,2,6,10,17,0,1,0,0,0,0,0,3,0,0,2,2,0,1,4,1,3,2,0,0,2,3,1,0,0,0,0,0,0,0,12,0,0,0,0,5,0,0,2,5,1,0,0,0,2,2,0,0,1,0,0,5,0,18,0,16,4,0,11,0,0,0,0,6,0,0,1,2,0,0,0,0,0,5,6,12,22,24,19,113,158,172,25,151,255,255,120,0,0,0,0,3,0,0,2,0,0,1,15,28,56,92,131,177,223,251,255,255,250,211,176,255,245,187,62,0,0,0,0,0,0,1,4,0,0,12,37,235,248,255,254,255,255,255,249,250,251,105,84,75,52,46,0,0,0,0,0,0,0,0,0,0,2,5,8,214,255,251,238,255,245,210,180,249,247,5,1,0,7,0,4,0,0,0,0,0,0,0,0,0,2,4,6,83,149,104,255,255,200,4,0,41,140,3,0,7,10,0,11,0,0,0,0,1,0,0,0,0,1,2,4,9,19,0,157,236,94,5,0,0,26,0,2,0,5,0,0,0,0,0,0,2,1,0,0,0,0,0,1,0,0,10,139,255,182,22,0,12,0,1,9,0,0,12,0,0,0,0,0,1,1,0,0,0,0,0,0,8,0,10,0,185,255,54,0,0,0,20,1,3,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,11,52,246,225,167,108,12,0,0,12,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,3,5,10,0,0,61,255,248,255,108,25,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,0,8,9,45,181,255,246,150,23,0,3,0,6,0,0,0,0,6,2,0,3,0,0,4,0,0,4,4,0,0,0,2,11,92,255,255,177,4,0,5,0,0,0,0,0,0,0,0,6,0,0,0,8,9,0,0,11,7,3,8,4,0,255,254,230,73,1,0,13,0,0,0,0,6,10,4,0,0,15,10,0,4,8,0,0,2,0,41,131,191,239,252,224,0,5,11,0,0,0,0,0,0,0,4,5,3,0,0,8,0,0,12,5,29,140,237,243,253,247,255,182,0,0,0,18,0,0,0,0,0,0,6,0,5,14,0,1,12,4,16,108,225,255,245,255,255,209,69,9,4,0,0,0,0,0,0,0,11,5,7,0,0,1,0,17,3,84,198,253,253,255,245,190,72,15,0,0,0,6,17,0,0,0,0,0,6,0,0,12,12,0,25,158,231,243,247,255,255,193,83,16,0,0,22,4,6,6,0,4,0,0,0,0,0,5,4,0,62,177,214,255,248,252,255,233,130,24,0,0,0,7,0,8,0,0,15,0,0,0,0,0,2,0,0,20,125,240,255,246,198,145,118,22,11,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,11,7,0,0,9,6,0,13,0,20,0,4,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,2,0,0,6,0,0,2,0,1,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,0,0,0,0,0,0,0,13,12,2,3,0,4,0,5,0,0,0,0,0,0,0,0,0,0,0,0};
uint8_t image_1[]={0,0,0,0,0,0,0,0,0,10,1,0,4,0,0,8,0,4,8,1,0,11,1,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,18,0,0,20,0,11,0,0,2,9,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,4,0,0,6,0,12,5,0,7,4,1,3,0,0,0,0,0,0,0,0,0,0,0,0,1,0,6,6,0,0,0,0,5,0,0,13,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,0,7,56,166,255,157,56,0,23,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,21,0,0,7,0,59,220,234,255,251,246,5,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,7,10,0,69,203,255,255,248,215,246,56,9,10,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,71,202,255,241,250,184,106,254,254,125,0,0,0,0,0,0,0,5,0,0,13,0,0,4,7,0,8,172,235,255,255,255,255,235,110,188,248,175,5,0,0,0,0,0,0,5,0,0,4,0,0,2,6,4,50,239,255,243,189,105,255,229,40,80,255,158,7,0,0,0,0,0,1,2,1,0,0,1,1,0,9,28,232,255,244,196,7,83,107,34,1,2,255,234,53,0,0,0,0,0,0,0,4,0,0,4,0,0,36,172,255,222,218,83,0,0,7,0,0,0,255,251,166,0,0,0,0,0,0,0,5,1,1,0,0,12,178,254,227,79,13,11,13,7,0,25,0,0,255,249,190,6,0,0,0,0,2,0,4,0,1,0,0,72,254,248,63,15,0,20,3,0,0,0,0,10,246,255,182,6,0,0,0,0,4,0,2,0,2,0,30,175,252,195,0,0,0,0,0,27,16,0,0,16,246,237,205,0,0,0,0,0,3,0,1,0,4,0,64,255,254,108,10,0,2,10,0,0,0,4,18,0,255,255,135,0,0,0,0,0,3,3,0,0,1,6,89,248,230,26,3,0,5,5,10,0,1,0,11,128,251,184,19,0,0,0,0,0,1,0,4,7,3,0,79,254,223,15,0,0,3,0,0,1,7,0,132,255,234,64,0,2,0,0,0,0,3,2,2,0,0,0,87,255,143,0,2,0,10,11,0,3,39,192,249,149,5,8,0,0,0,0,0,0,0,5,4,0,0,6,91,247,218,24,0,0,0,0,14,111,234,253,167,0,4,0,0,0,0,0,0,0,0,1,7,3,1,1,83,245,251,125,67,22,82,186,228,245,229,160,57,15,0,18,0,7,0,0,0,0,3,0,0,6,2,0,82,255,255,236,229,224,249,255,243,205,133,6,0,0,16,0,4,0,0,0,0,0,6,1,0,0,2,0,50,183,238,255,250,240,251,231,137,3,0,4,11,14,0,6,0,7,0,0,0,0,0,8,5,0,10,4,0,32,145,236,255,250,151,32,8,0,0,0,5,0,0,7,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
	
int main(void) 
{	
	printf("***********************\n");
	printf("*****             *****\n");
	printf("*****  Cortex M3  *****\n");
	printf("*****             *****\n");
	printf("***********************\n");
		send2LED(0x0f);
	while(1) 
	{
		for(uint16_t i = 0; i< 784; i = i+4)
		{
			addr_hdmi = hdmi_0 + (i/4);
			a = image_1[i+3]<< 24;
			b = image_1[i+2]<< 16;
			c = image_1[i+1]<< 8;
			d = image_1[i];
			e = a + b + c + d;
			*(addr_hdmi) = ~e;
		}

		for(int i = 0; i<1000;i++)//计时1s
			delay_1ms();
		send2LED(0x00);
		
		for(uint16_t i = 0; i< 784; i = i+4)
		{
			addr_hdmi = hdmi_0 + (i/4);
			a = image[i+3]<< 24;
			b = image[i+2]<< 16;
			c = image[i+1]<< 8;
			d = image[i];
			e = a + b + c + d;
			*(addr_hdmi) = ~e;
		}
		
		for(int i = 0; i<1000;i++)//计时1s
			delay_1ms();	
		send2LED(0x0f);		

	}
}

